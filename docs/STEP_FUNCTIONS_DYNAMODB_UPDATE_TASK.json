{
  "Comment": "子Step FunctionsのDynamoDB UpdateItemタスク定義（修正版）",
  "Type": "Task",
  "Resource": "arn:aws:states:::dynamodb:updateItem",
  "Parameters": {
    "TableName": "siftbeam-processing-history",
    "Key": {
      "processing-historyId": {
        "S": "{% $processingHistoryId %}"
      }
    },
    "UpdateExpression": "SET downloadS3Keys = :downloadKeys, updatedAt = :updatedAt, completedAt = :completedAt, #status = :status",
    "ExpressionAttributeNames": {
      "#status": "status"
    },
    "ExpressionAttributeValues": {
      ":downloadKeys": "{% {'L': $downloadS3Keys[].{'S': $}} %}",
      ":updatedAt": {
        "S": "{% $states.context.State.EnteredTime %}"
      },
      ":completedAt": {
        "S": "{% $states.context.State.EnteredTime %}"
      },
      ":status": {
        "S": "success"
      }
    }
  },
  "ResultPath": null,
  "Next": "Success"
}